<!DOCTYPE hibernate-mapping 
    PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-access="field">

<!--
    <class name="d13.dao.Invoice" table="invoices">
        <id name="invoiceId"><generator class="native/"/></id>
        
    </class>

    <class name="d13.dao.DueItem" table="dues_owed">
        <id name="itemId"><generator class="native"/></id>
        <property name="type"/>
        <property name="paymentRequired"/>
        <property name="amount"/>
        <property name="registrationDate" type="d13.dao.types.DateTimeType"/>
        <property name="approvalDate" type="d13.dao.types.DateTimeType"/>
        <many-to-one name="invoice" class="d13.dao.Invoice"/>
        <property name="invoicedAmount"/>
    </class>
-->

    <class name="d13.dao.Role" table="roles">
        <id name="roleId"><generator class="native"/></id>
        <property name="name" not-null="true"/>
        <property name="level" not-null="true"/>
        <property name="viewUsers" not-null="true"/>
        <property name="editUsers" not-null="true"/>
        <property name="reviewUsers" not-null="true"/>
        <property name="admitUsers" not-null="true"/>
        <property name="finalizeUsers" not-null="true"/>
        <property name="viewLogs" not-null="true"/>
    </class>

    <class name="d13.dao.RuntimeOptions$RuntimeOption" table="options">
        <id name="name"><generator class="assigned"/></id>
        <property name="value"/>
    </class>

    <class name="d13.dao.QueuedEmail" table="notifications">
        <id name="qnId"><generator class="native"/></id>
        <property name="type" not-null="true"/>
        <property name="queued" not-null="true" type="d13.dao.types.DateTimeType"/>
        <property name="userId"/>
        <property name="failedAttempt" type="d13.dao.types.DateTimeType"/>
        <property name="failedDetail" type="text"/>
    </class>

    <class name="d13.dao.ApprovalSurvey" table="approval_surveys">
        <id name="aformId"><generator class="foreign"><param name="property">user</param></generator></id>
        <one-to-one name="user" class="d13.dao.User" constrained="true"/>
        <property name="completionTime" type="d13.dao.types.DateTimeType"/>
        <property name="sharingWith" type="text"/>
        <property name="livingIn" type="string"/>
        <property name="livingInOther" type="string"/>
        <property name="livingSpaceSize" type="text"/>
        <property name="mealPreference" type="text"/>
        <property name="placementRequest" type="text"/>
        <property name="disengage9_1" not-null="true"/>
        <property name="disengage9_2" not-null="true"/>
        <property name="disengage9_3" not-null="true"/>
        <property name="disengage9_4" not-null="true"/>
        <property name="disengageNone" not-null="true"/>
        <property name="tixForSale" not-null="true"/>
        <property name="numForSale" not-null="true"/>
        <property name="tixWanted" not-null="true"/>
        <property name="numWanted" not-null="true"/>
    </class>
    
    <class name="d13.dao.RegistrationForm" table="registration_forms">
        <id name="rformId"><generator class="foreign"><param name="property">user</param></generator></id>
        <one-to-one name="user" class="d13.dao.User" constrained="true"/>
        <property name="completionTime" type="d13.dao.types.DateTimeType"/>
		<property name="helpedOffPlaya" type="text"/>
		<property name="helpedAlphaCamp"/>
		<property name="helpedCampBuild"/>
		<property name="helpedDisengage"/>
		<property name="helpedLeadRoles"/>
		<property name="helpedLoveMinistry"/>
		<property name="helpedLNT"/>
		<property name="helpedOther"/>
		<property name="helpedOtherOther" type="text"/>
		<property name="disorientVirgin"/>
		<property name="bmVirgin"/>
		<property name="sponsor" type="text"/>
		<property name="sponsorFor" type="text"/>
		<property name="arrivalDate"/>
		<property name="arrivalTime"/>
		<property name="departureDate"/>
		<property name="departureTime"/>
		<property name="drivingFromTo" type="d13.dao.types.LocationType"/>
		<property name="drivingFromToOther" type="text"/>
		<property name="rvType" type="d13.dao.types.RVSelectionType"/>
		<property name="driving"/>
		<property name="rideSpaceTo"/>
		<property name="rideSpaceFrom"/>
		<property name="parkAtCamp"/>
		<property name="vehicleComments" type="text"/>
		<property name="needRideTo"/>
		<property name="needRideFrom"/>
		<property name="tixForSale" not-null="true"/>
		<property name="numForSale" not-null="true"/>
		<property name="tixWanted" not-null="true"/>
		<property name="numWanted" not-null="true"/>
		<many-to-one name="groupLeader" class="d13.dao.User"/>
		<property name="personalProject" type="text"/>
		<property name="comments" type="text"/>
        
    </class>
    
    <class name="d13.dao.ActivityLogEntry" table="activity_log">
        <id name="entryId"><generator class="native"/></id>
        <property name="time" not-null="true" type="d13.dao.types.DateTimeType"/>
        <many-to-one name="toWho" class="d13.dao.User" not-null="true"/>
        <many-to-one name="byWho" class="d13.dao.User"/>
        <property name="description"/>
    </class>
    
    <class name="d13.dao.User" table="users">
        <id name="userId"><generator class="native"/></id>
        <property name="email" length="254" not-null="true" unique="true"/>
        <many-to-one name="role" class="d13.dao.Role"/>
        <property name="passwordSalt" length="8" not-null="true"/>
        <property name="passwordHash" length="40" not-null="true"/>
        <property name="created" type="d13.dao.types.DateTimeType" not-null="true"/>
        <property name="lastLogin" type="d13.dao.types.DateTimeType"/>
        <property name="termsAgreed" not-null="true"/>
        <property name="gender" type="d13.dao.types.GenderType" not-null="true"/>
        <property name="realName" length="128" not-null="true"/>
        <property name="playaName" length="128"/>
        <property name="location" type="d13.dao.types.LocationType" not-null="true"/>
        <property name="locationOther" length="128"/>
        <property name="phone" length="24"/>
        <property name="emergencyContact" type="text" not-null="true"/>
        <one-to-one name="registration" class="d13.dao.RegistrationForm" cascade="save-update"/>
        <one-to-one name="approval" class="d13.dao.ApprovalSurvey" cascade="save-update"/>
        <property name="state" type="d13.dao.types.UserStateType" not-null="true"/>
        <property name="approvedOn" type="d13.dao.types.DateTimeType"/>
        <property name="adminComment" type="text"/>
        <set name="cells" table="users_cells">
            <key column="userId"/>
            <many-to-many column="cellId" class="d13.dao.Cell"/>
        </set>
        <list name="activityLog" cascade="all">
            <key column="toWho"/>
            <index column="`index`"/>
            <one-to-many class="d13.dao.ActivityLogEntry"/>
        </list>
        <!-- 
        <many-to-one name="personalDue" class="d13.dao.DueItem" cascade="all"/>
        <many-to-one name="rvDue" class="d13.dao.DueItem" cascade="all"/>
        -->
    </class>
    
    <class name="d13.dao.Cell" table="cells">
        <id name="cellId"><generator class="native"/></id>
        <many-to-one name="parent" class="d13.dao.Cell" insert="false" update="false"/>
        <property name="category" not-null="true"/>
        <property name="name" type="string" length="128" not-null="true"/>
        <property name="description" type="text"/>
        <property name="people" not-null="true"/>
        <property name="startDate"/>
        <property name="endDate"/>
        <set name="users" inverse="true" table="users_cells">
            <key column="cellId"/>
            <many-to-many column="userId" class="d13.dao.User"/>
        </set>
        <list name="children" cascade="all">
            <key column="parent"/>
            <index column="`index`"/>
            <one-to-many class="d13.dao.Cell"/>
        </list>
    </class>

</hibernate-mapping>
